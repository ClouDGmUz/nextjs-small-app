(()=>{var e={};e.id=4,e.ids=[4],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4734:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>j,routeModule:()=>g,serverHooks:()=>h,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{DELETE:()=>l,GET:()=>p,POST:()=>d,PUT:()=>c});var n=r(2706),a=r(8203),o=r(5994),i=r(9187),u=r(5600);async function p(){try{let e=await u.z.agent.findMany({orderBy:{createdAt:"desc"}});return i.NextResponse.json(e)}catch{return i.NextResponse.json({error:"Failed to fetch agents"},{status:500})}}async function d(e){try{let t=await e.json(),r=await u.z.agent.create({data:{name:t.name,phoneNumber:t.phoneNumber,location:t.location,status:t.status||"active",telegram:t.telegram||null}});return i.NextResponse.json(r,{status:201})}catch{return i.NextResponse.json({error:"Invalid request body"},{status:400})}}async function c(e){try{let t=await e.json();if(!t.id)return i.NextResponse.json({error:"Agent ID is required"},{status:400});let r=await u.z.agent.update({where:{id:t.id},data:{name:t.name,phoneNumber:t.phoneNumber,location:t.location,status:t.status,telegram:t.telegram||null,order:t.order}});return i.NextResponse.json(r)}catch{return i.NextResponse.json({error:"Failed to update agent"},{status:400})}}async function l(e){let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return i.NextResponse.json({error:"Agent ID is required"},{status:400});try{return await u.z.agent.delete({where:{id:r}}),i.NextResponse.json({message:"Agent deleted successfully"})}catch{return i.NextResponse.json({error:"Failed to delete agent"},{status:400})}}let g=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/agents/route",pathname:"/api/agents",filename:"route",bundlePath:"app/api/agents/route"},resolvedPagePath:"D:\\dev\\Node\\NextJS\\webapp\\src\\app\\api\\agents\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:h}=g;function j(){return(0,o.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},6487:()=>{},8335:()=>{},5600:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});let s=require("@prisma/client"),n=globalThis.prisma??new s.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,452],()=>r(4734));module.exports=s})();